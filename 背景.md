# 背景
如果说过去的十年是搜索技术大行其道的十年，那么个性化推荐技术将成为未来十年中最重要的革新之一。目前几乎所有大型的电子商务系统，如Amazon、阿里巴巴等，都不同程度地使用了各种形式的推荐系统。而近来以“发现”为核心的网站正开始在互联网上崭露头角，比如国外侧重于视频租借服务的Netflix、国内侧重于音乐和图书推荐的豆瓣，它们都比同一领域下传统应用厂商获得更多的消费者的青睐。

电信作为网络服务接入者和网络内容的承载者，对于用户网络应用行为和用户关注内容的行为，相比一般的互联网厂商和应用开发商，理应更加贴近和熟悉。但目前电信领域并没有比较成熟的内容个性化推荐技术。

# 概述
本项目在流量经营工作的背景下，在掌握了用户移动互联网基础数据（用户通信的位置信息、通信内容和通信对象等）的基础上，依托互联网大数据学习算法，能较全面理解刻画用户对视频内容的兴趣爱好；同时，采用互联网技术爬取海量实时的视频内容，通过推荐模型对视频内容进行标签聚类，并与个体用户相联系，面向用户实现个性化推荐；进一步，对用户的反馈行为（喜欢和不喜欢）进行实时计算，并形成在线持续推荐策略，吸引用户长时间观看视频，拉动流量消费。


# 目标
本项目旨在达成两步推荐策略。
## 1 前向推荐
第一步为前向推荐，将一小批互联网上的热门视频，结合离线挖掘的用户兴趣爱好，作为种子视频，推送给用户。

## 2 后向推荐
第二步为后向推荐，在第一步推送种子视频给用户的时候，采用仔细设计好的观看页面，吸引用户对收看视频后的感受结果进行反馈，如“喜欢”、“换个话题”等按钮。依托海量爬取的视频内容库，通过机器学习算法，对用户反馈进行实时计算，在非常短的时间内（毫秒级）形成下一个视频的推荐策略。

> 综合以上两点，对用户来说，这是一种“简单的”、“有趣的”、“懂我的”和“无止境”的内容推荐链，其体验远超传统的分类罗列方式，能够吸引用户持续观看，从而将用户的流量使用最大化。这是大数据时代下，流量经营工作脱离管道角色，将用户和内容结合起来的核心技术。

# 技术要求

个性化推荐系统必须能够基于用户之前的口味和喜好提供相关的精确的推荐，而且这种口味和喜欢的收集必须尽量少的需要用户的劳动。

推荐的结果必须能够实时计算，这样才能够在用户离线前之前获得推荐的内容，并且及时的对推荐结果作出反馈。

实时性也是推荐系统与通常的数据挖掘技术显著不同的一个特点。



## 系统架构
本系统由六个模块组成：
#### 1. 爬取引擎
采用互联网技术，到视频网站爬取视频内容。
#### 2. 内容挖掘
采用数据挖掘技术，通过视频标签、名称、类目、评价等信息，对视频进行聚类打标。
#### 3. 用户挖掘
通过用户的访问互联网的DPI记录和APP记录，挖掘用户对不同领域的兴趣和视频内容的收看偏好。
#### 4. 前向推荐
结合用户的不同偏好，将不同的互联网热门视频作为种子视频，推送给用户。
#### 5. 离线模型
采用“关联规则”和“协同推荐”等机器学习算法，将视频和用户结合，形成互相交叉和不同权重的关联关系。
#### 6. 后向推荐
观察用户对观看视频的



一个完整的推荐系统由三部分构成：行为记录、模型分析和推荐模块。
### 1 行为记录
行为记录模块负责记录能够体现用户喜好的行为，比如购买、下载、评分等。这部分看起来简单，其实需要非常仔细的设计。比如说购买和评分这两种行为表达潜在的喜好程度就不尽相同完善的行为记录需要能够综合多种不同的用户行为，处理不同行为的累加。

### 2 模型分析
模型分析模块的功能则实现了对用户行为记录的分析，采用不同算法建立起模型描述用户的喜好信息。

### 3 推荐模块
通过推荐模块，实时的从内容集筛选出目标用户可能会感兴趣的内容推荐给用户。因此，除了推荐系统本身，为了实现推荐，还需要一个可供推荐的内容集。比如，对于音乐推荐系统来说，一个音乐库就是这样的内容集。我们对内容集本身需要提供的信息要求非常低，在经典的协同过滤算法下，内容集甚至只需要提供ID就足够。而对于基于内容的推荐系统来说，由于往往需要对内容进行特征抽取和索引，我们就会需要提供更多的领域知识和内容属性。这种情况下，还是拿音乐举例，歌手、流派之类的属性和音频信息就成为必需的内容集信息。

## 技术选型
### 1 推荐模型分类
可以想象在海量物品和用户的系统中，推荐引擎的计算量是相当大的，要实现实时的推荐务必需要建立一个推荐模型，关于推荐模型的建立方式可以分为以下几种：

##### （1）基于物品和用户
这种推荐引擎将每个用户和每个物品都当作独立的实体，预测每个用户对于每个物品的喜好程度，这些信息往往是用一个二维矩阵描述的。由于用户感兴趣的物品远远小于总物品的数目，这样的模型导致大量的数据空置，即我们得到的二维矩阵往往是一个很大的稀疏矩阵。同时为了减小计算量，我们可以对物品和用户进行聚类， 然后记录和计算一类用户对一类物品的喜好程度，但这样的模型又会在推荐的准确性上有损失。

##### （2）基于关联规则的推荐（Rule-based Recommendation）
关联规则的挖掘已经是数据挖掘中的一个经典的问题，主要是挖掘一些数据的依赖关系，典型的场景就是“购物篮问题”，通过关联规则的挖掘，我们可以找到哪些物品经常被同时购买，或者用户购买了一些物品后通常会购买哪些其他的物品，当我们挖掘出这些关联规则之后，我们可以基于这些规则给用户进行推荐。

##### （3）基于模型的推荐（Model-based Recommendation）
这是一个典型的机器学习的问题，可以将已有的用户喜好信息作为训练样本，训练出一个预测用户喜好的模型，这样以后用户在进入系统，可以基于此模型计算推荐。这种方法的问题在于如何将用户实时或者近期的喜好信息反馈给训练好的模型，从而提高推荐的准确度。

## 选择协同过滤算法

迄今为止在个性化推荐系统中，协同过滤（Collaborative Filtering）技术是应用最成功的技术。目前国内外互联网上有许多大型网站已经应用这项技术为用户更加智能的推荐内容。

#### 基于用户的协同过滤技术
基本原理是基于用户行为选择的相关性。用户的行为选择这里指的是下载、购买、评价等等能够显式或者隐式体现出用户喜好的行为。

在一个典型的基于协同过滤技术的推荐系统中，输入数据通常可以表述为一个m×n 的用户内容矩阵R，m是用户数，n是内容数。矩阵的值与内容的类型有关，通常由行为记录模块决定。如果内容是网上书店中的书，则矩阵的值可以表示用户购买与否，例如1表示购买，0表示没有购买；或者表示用户对它的评价有多高，这样的评价值就可以有几个等级，比如常见的1～5级评价制。

基于用户的协同过滤，通过比较目标用户的一系列行为选择和其他用户之间的相似性，来识别出一组相互具有类似喜好的用户，又可以称为“同好”。一旦系统能够识别一个用户的同好用户，就能够将他们最感兴趣的内容作为当前用户的推荐结果推荐给这个用户。也就是说，**以前的行为选择与你相似的用户，在以后的行为中很可能也会和你相似。因此将这些用户做为基准来向你推荐内容。**

协同过滤的核心问题是寻找与目标用户兴趣相近的一组用户。这种相似用户通常被称为最近邻居（Nearest Neighbor）。用户之间的相似度是通过比较两个用户的行为选择矢量得到的。目前，比较行为选择矢量的相似度计算方法有许多种，比较经典的算法包括泊松相关系数（Person Correlation Coefficient）和余弦相似性（Cosine-based Similarity）。
“最近邻居”产生后，我们就能够计算得到用户最可能感兴趣的内容集（也叫做TopN推荐集）。为了得到推荐集，分别统计“最近邻居”中的用户对不同内容的兴趣度，取其中排在最前面的内容作为推荐集。

基于用户的协同过滤技术在个性化推荐系统中获得了极大的成功，但它有自身的局限性。推荐集的产生方式意味着一个内容只有已经被用户选择（购买）后才有机会被推荐给其他用户。对于一个网上书店来说，新上架的书因为还没有被相当数量的用户购买或者评价的记录，便很少有机会被用户的“最近邻居”筛选进入推荐集。这个问题，也被称之为协同过滤的“冷启动”问题。

此外，因为计算用户的相似度时，是通过将目标用户的历史行为记录与其他每一个用户的记录相比较得出的，所以对于一个现实的推荐系统来说，扩展性将成为非常严重的问题。设想一下，对于一个拥有上百万用户的网站来说，每计算一个用户都将涉及到上百万次的比较，更不要说其中会带来的大量数据库IO操作的开销。

#### 基于内容项的协同过滤技术
与基于用户的技术不同的是，这种方法比较的是内容项与内容项之间的相似度。Item-based 方法同样需要进行三个步骤获得推荐：1）得到内容项（Item）的历史评分数据；2）针对内容项进行内容项之间的相似度计算，找到目标内容项的“最近邻居”；3）产生推荐。这里内容项之间的相似度是通过比较两个内容项上的用户行为选择矢量得到的。举个例子，假设用户和内容项如下：

和基于用户的推荐系统相比，**基于内容项的推荐系统最大的改进是更具有扩展性。基于内容项的方法通过计算内容项之间的相似性来代替用户之间的相似性。**对于通常的互联网应用来说，提供的内容项数量相对较为稳定。比如一个大型网上书店，可能出售的书籍数量也就在几十万上下，而用户数量就可能达到几百万。所以，比起用户，内容项之间的相似性计算需要的计算量要少很多，从而大大降低了在线计算量，提高系统性能。基于内容项的推荐系统应用最为成功的是Amazon。当然，在降低了计算量的同时，完全基于内容项的推荐技术也在推荐的准确度上做了小小的牺牲。大多数情况下，基于用户的推荐技术表现要略好于基于内容项的方法。这是因为基于内容的方法忽略了相似用户之间的组群特征。

#### 前两种模型的欠缺
不论是第一代的基于用户方法，还是第二代的基于内容项方法，都不可避免的遇到以下问题：
#### 1. 数据稀疏
在任何一个网站中，用户的评分记录或者购买记录，相对整个可供选择的内容集来说，都是很小的一部分。所以在许多推荐系统中，每个用户涉及的数据量相当有限，在一些大的系统如Amazon中，用户最多不过就评价过上百万本书的1％，造成评估数据相当稀疏。当用户评价过的内容之间找不到交集时，就难以判断用户的口味是否相似，难以找到相似用户集，导致推荐效果大大降低。为了解决用户数据的稀疏问题，最方便的办法就是将用户对没有选择过的内容项的评分设为一个固定的缺省值，例如用户的平均评分。针对如何预测遗漏的评分业内又提出了很多种方法，不过一般来说采用最简单的改进方法就可以有效地提高协同过滤推荐系统的准确度。
#### 2. 计算复杂
即便采用了基于内容项的方法，在数据量巨大的时候，计算复杂度仍然成为性能瓶颈。为了进一步解决协同过滤技术的扩展性能问题，目前比较有效的办法是在用户评分数据上做一次**聚类分析(clustering)**。聚类技术首先**将具有相似兴趣爱好的用户分配到相同的分类中**。聚类产生之后，它或者将“最近邻居”搜索对象限制在最相近的聚类中，根据类中其他用户的评价预测目标用户的评价，或者用聚类的中心作为近似提取推荐结果。由于用户之间的分类相对变化比较小，因此聚类过程往往可以离线进行，而无需实时计算，这样就大大降低了实时推荐的计算压力，提高推荐系统的速度。一般来说，聚类将用户分为多少个类，推荐系统的整体速度就能够提高多少倍。具体选择什么样的聚类算法，又会因应用领域和数据的分布特性而不同。如果聚类算法选择不当，反而会降低推荐的准确性。

# 本项目技术创新点
1. 

一个商用推荐系统的尤其关键之处在于对海量用户数据的处理。因为推荐系统是数据优先，数据的积累越多对推荐的精度就越有好处。而当用户的行为数据真正积累到上百万甚至上亿时，如何在合理时间内得出有效的推荐，就是对推荐技术最大的考验。除此之外，一个优秀的推荐系统需要能够结合内容相似与用户行为相似。传统的协同过滤方法是忽略内容本身的属性的，这一方面固然是对数据要求少的优点，但另一方面也带来了难以避免的“冷启动”问题。

其实，随着标签系统在互联网上的广泛应用，**标签本身就不失为是一种很好的内容属性**。如何利用也是值得大家探讨的。充分利用到内容本身的属性，将不同的相似性结合起来，这会给基于协同过滤的推荐技术带来新的动力。

最后，**设计良好的推荐技术要能够从用户对推荐内容的反馈中自行调整和学习**。因为实际上每个用户对于推荐的内容都有不同的要求，比如有的用户可能偏好比较热门的内容，有的用户更愿意发现冷门的内容。针对不同用户的反馈来不断学习每个用户的特征，才能够避免所采用算法本身先天的偏差，获得较为理想的效果。